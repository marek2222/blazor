@page "/upload"

<h3>File Upload Demo</h3>

<div class="row">
    <div class="col-md-6">
        <h3>Single file upload</h3>
        <RadzenUpload Url="upload/single" Style="margin-bottom:20px;" Progress="@((args)=> OnProgress(args, "Single File Upload"))"></RadzenUpload>

        <br />

        <h3>Multiple file upload</h3>
        <RadzenUpload Multiple="true" Url="upload/multiple" Style="margin-bottom:20px;" Progress="@((args)=> OnProgress(args, "Multiple File Upload"))"></RadzenUpload>

        <br />

         <h3>Upload image file only</h3>
        <RadzenUpload Multiple="true" Accept="image/* " Url="upload/multiple" Style="margin-bottom:20px;" Progress="@((args)=> OnProgress(args, "Multiple File Upload"))"></RadzenUpload>

    </div>

</div>

<div class="col-md-6">
    <h3>Event</h3>
    <RadzenCard Style="overflow:auto;height:500px;">
        <RadzenProgressBar Value="@progress" Unit="@info" Visible="@(progress>0)" Style="margin-bottom:20px;" ></RadzenProgressBar>
    </RadzenCard>
</div>


@code {
    int progress;
    string info;

    void OnProgress(UploadProgressArgs args, string name)
    {
        try
        {
            this.info = $"%'{name}'/ {args.Loaded} z {args.Total} bitów.";
            this.progress = args.Progress;
        }
        catch (Exception ex)
        {
            this.info = $"Blad: {ex.Message}";
        }
    }
}
